(this["webpackJsonpmedium-react-hooks"]=this["webpackJsonpmedium-react-hooks"]||[]).push([[0],{40:function(e,a,t){e.exports=t(71)},71:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(30),l=t.n(r),o=t(4),s=t(25),m=t(15),i=t(39),u={en:{translation:{common:{email:"Email",signIn:"Sign in",signUp:"Sign up",home:"Home",password:"Password",username:"Username",newPost:"New Post",loading:"Loading...",pageNotFound:"Page Not Found",popularTags:"Popular tags",yourFeed:"Your feed",globalFeed:"Global feed",noArticlesYet:"No articles are here... yet."},auth:{needAccount:"Need an account?",haveAccount:"Have an account?"},globalFeed:{title:"Global Feed",bannerTitle:"Medium clone",bannerDescription:"A place to share knowledge."},article:{title:"Article",readMore:"Read more..."},errors:{general:"Something went wrong"}}}};s.a.use(i.a).use(m.e).init({fallbackLng:"en",interpolation:{escapeValue:!1},resources:u});s.a;var g=t(2),E=t(74),d=Object.freeze({main:"/",article:"/article",articles:"/articles",login:"/login",register:"/register",newArticle:"/articles/new",profiles:"/profiles",tags:"/tags",feed:"/feed"}),f=t(5),b=function(){var e=Object(E.a)().t;return c.a.createElement("div",null,e("article.title"))},p=t(12),v=t(6),j=t(73),N=function(e){var a=Object(n.useState)(!1),t=Object(g.a)(a,2),c=t[0],r=t[1],l=Object(n.useState)(null),o=Object(g.a)(l,2),s=o[0],m=o[1],i=Object(n.useState)(null),u=Object(g.a)(i,2),E=u[0],d=u[1],f=Object(n.useState)({}),b=Object(g.a)(f,2),p=b[0],N=b[1],h=O("token"),k=Object(g.a)(h,1)[0],w=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(e),r(!0)}),[]);return Object(n.useEffect)((function(){if(c){var a=Object(v.a)(Object(v.a)({},p),{},{headers:{authorization:k?"Token ".concat(k):""}});Object(j.a)("https://conduit.productionready.io/api"+e,a).then((function(e){m(e.data)})).catch((function(e){d(e.response.data)})).finally((function(){r(!1)}))}}),[c,p,k,e]),[{isLoading:c,response:s,error:E},w]},O=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=Object(n.useState)((function(){return localStorage.getItem(e)||a})),c=Object(g.a)(t,2),r=c[0],l=c[1];return Object(n.useEffect)((function(){localStorage.setItem(e,r)}),[e,r]),[r,l]},h=Object.freeze({login:"/users/login",register:"/users",currentUser:"/user",articles:"/articles",tags:"/tags",feed:"/articles/feed"}),k=function(){var e=Object(E.a)().t;return c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,e("globalFeed.bannerTitle")),c.a.createElement("p",null,e("globalFeed.bannerDescription"))))},w=t(38),y=function(e,a){var t=Object(p.parse)(e).page,n=t?Number(t):1;return{currentPage:n,offset:n*a-a}},L=Object(n.createContext)([{},function(){}]),x=function(e){var a=e.children,t=Object(n.useState)({isLoading:!1,isLoggedIn:null,currentUser:null}),r=Object(g.a)(t,2),l=r[0],o=r[1];return c.a.createElement(L.Provider,{value:[l,o]},a)},F=function(e){var a=e.location,t=y(a.search,10),r=t.currentPage,l=t.offset,o=Object(p.stringify)({limit:10,offset:l}),s="".concat(h.articles,"?").concat(o),m=N(s),i=Object(g.a)(m,2),u=i[0],E=u.response,d=u.isLoading,f=u.error,b=i[1],v=Object(n.useContext)(L),j=Object(g.a)(v,1)[0];return Object(n.useEffect)((function(){b()}),[b,r]),c.a.createElement("div",{className:"home-page"},!1===j.isLoggedIn&&c.a.createElement(k,null),c.a.createElement("div",{className:"container page"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-9"},c.a.createElement(R,null),d&&c.a.createElement(J,null),f&&c.a.createElement(B,null),!d&&E&&c.a.createElement(c.a.Fragment,null,c.a.createElement(D,{articles:E.articles}),c.a.createElement(G,{total:E.articlesCount,limit:10,currentPage:r}))),c.a.createElement("div",{className:"col-md-3"},c.a.createElement(H,null)))))},P=function(e){var a=e.isLoginView,t=Object(E.a)().t,n=t(a?"common.signIn":"common.signUp"),r=t(a?"auth.needAccount":"auth.haveAccount"),l=a?d.register:d.login;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:"text-xs-center"},n),c.a.createElement("p",{className:"text-xs-center"},c.a.createElement(o.b,{to:l},r)))},S=function(e){var a=Object(E.a)().t,t=e.match.path===d.login,r=a(t?"common.signIn":"common.signUp"),l=t?h.login:h.register,o=N(l),s=Object(g.a)(o,2),m=s[0],i=m.isLoading,u=m.response,b=m.error,p=s[1],j=Object(n.useState)(""),k=Object(g.a)(j,2),w=k[0],y=k[1],x=Object(n.useState)(""),F=Object(g.a)(x,2),S=F[0],I=F[1],C=Object(n.useState)(""),A=Object(g.a)(C,2),U=A[0],M=A[1],D=O("token"),z=Object(g.a)(D,2)[1],V=Object(n.useContext)(L),Y=Object(g.a)(V,2),G=Y[0],H=Y[1];return Object(n.useEffect)((function(){u&&(z(u.user.token),H((function(e){return Object(v.a)(Object(v.a)({},e),{},{isLoggedIn:!0,isLoading:!1,currentUser:u.user})})))}),[u,H,z]),G.isLoggedIn?c.a.createElement(f.a,{to:d.feed}):c.a.createElement("div",{className:"auth-page"},c.a.createElement("div",{className:"container page"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},c.a.createElement(P,{isLoginView:t}),c.a.createElement("form",{onSubmit:function(e){var a=t?{email:w,password:S}:{username:U,email:w,password:S};e.preventDefault(),H((function(e){return Object(v.a)(Object(v.a)({},e),{},{isLoading:!0})})),p({method:"post",data:{user:a}})}},b&&c.a.createElement(T,{backendErrors:b.errors}),c.a.createElement("fieldset",null,!t&&c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:a("common.username"),value:U,onChange:function(e){return M(e.target.value)}})),c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("input",{className:"form-control form-control-lg",type:"email",placeholder:a("common.email"),value:w,onChange:function(e){return y(e.target.value)}})),c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:a("common.password"),value:S,onChange:function(e){return I(e.target.value)}})),c.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:i},r)))))))},I=function(){var e=Object(E.a)().t;return c.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"200px 0"}},c.a.createElement("h2",null,e("common.pageNotFound")))},C=function(e){var a=e.location,t=e.match,r=Object(E.a)().t,l=t.params.slug,o=y(a.search,10),s=o.currentPage,m=o.offset,i=Object(p.stringify)({limit:10,offset:m,tag:l}),u="".concat(h.articles,"?").concat(i),d=N(u),f=Object(g.a)(d,2),b=f[0],v=b.response,j=b.isLoading,O=b.error,k=f[1];return Object(n.useEffect)((function(){k()}),[k,s,l]),c.a.createElement("div",{className:"home-page"},c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,r("globalFeed.bannerTitle")),c.a.createElement("p",null,r("globalFeed.bannerDescription")))),c.a.createElement("div",{className:"container page"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-9"},c.a.createElement(R,{tagName:l}),j&&c.a.createElement(J,null),O&&c.a.createElement(B,null),!j&&v&&c.a.createElement(c.a.Fragment,null,c.a.createElement(D,{articles:v.articles}),c.a.createElement(G,{total:v.articlesCount,limit:10,currentPage:s}))),c.a.createElement("div",{className:"col-md-3"},c.a.createElement(H,null)))))},A=function(e){var a=e.location,t=y(a.search,10),r=t.currentPage,l=t.offset,o=Object(p.stringify)({limit:10,offset:l}),s="".concat(h.feed,"?").concat(o),m=N(s),i=Object(g.a)(m,2),u=i[0],E=u.response,d=u.isLoading,f=u.error,b=i[1];return Object(n.useEffect)((function(){b()}),[b,r]),c.a.createElement("div",{className:"home-page"},c.a.createElement("div",{className:"container page"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-9"},c.a.createElement(R,null),d&&c.a.createElement(J,null),f&&c.a.createElement(B,null),!d&&E&&c.a.createElement(c.a.Fragment,null,c.a.createElement(D,{articles:E.articles}),c.a.createElement(G,{total:E.articlesCount,limit:10,currentPage:r}))),c.a.createElement("div",{className:"col-md-3"},c.a.createElement(H,null)))))},U=function(){return c.a.createElement(f.d,null,c.a.createElement(f.b,{path:d.main,component:F,exact:!0}),c.a.createElement(f.b,{path:d.feed,component:A}),c.a.createElement(f.b,{path:"".concat(d.tags,"/:slug"),component:C}),c.a.createElement(f.b,{path:d.login,component:S}),c.a.createElement(f.b,{path:d.register,component:S}),c.a.createElement(f.b,{path:"".concat(d.articles,"/:slug"),component:b}),!1,c.a.createElement(f.b,{path:"*",component:I}))},M=function(){var e=Object(E.a)().t,a=Object(n.useContext)(L),t=Object(g.a)(a,1)[0],r=t.isLoggedIn,l=t.currentUser;return c.a.createElement("nav",{className:"navbar navbar-light"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,c.a.createElement(o.b,{to:d.main,className:"navbar-brand"},"Medium")),c.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{exact:!0,to:d.main,className:"nav-link"},e("common.home"))),!1===r&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:d.login,className:"nav-link"},e("common.signIn"))),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:d.register,className:"nav-link"},e("common.signUp")))),r&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:d.newArticle,className:"nav-link"},c.a.createElement("i",{className:"ion-compose"}),"\xa0 ",e("common.newPost"))),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(d.profiles,"/").concat(l.username),className:"nav-link"},c.a.createElement("img",{className:"user-pic",src:l.image,alt:""}),"\xa0 ",l.username))))))},T=function(e){var a=e.backendErrors,t=Object.entries(a).map((function(e){var a=Object(g.a)(e,2),t=a[0],n=a[1];return"".concat(t," ").concat(n.join(" "))}));return c.a.createElement("ul",{className:"error-messages"},t.map((function(e){return c.a.createElement("li",{key:e},e)})))},D=function(e){var a=e.articles,t=Object(E.a)().t;return c.a.createElement("div",null,0===a.length&&c.a.createElement("div",{className:"article-preview"},t("common.noArticlesYet")),a.map((function(e,a){var n=e.author,r=e.createdAt,l=e.slug,s=e.title,m=e.description,i=e.tagList;return c.a.createElement("div",{key:a,className:"article-preview"},c.a.createElement("div",{className:"article-meta"},c.a.createElement(o.b,{to:"".concat(d.profiles,"/").concat(n.username)},c.a.createElement("img",{src:n.image,alt:""})),c.a.createElement("div",{className:"info"},c.a.createElement(o.b,{to:"".concat(d.profiles,"/").concat(n.username),className:"author"},n.username),c.a.createElement("span",{className:"date"},r))),c.a.createElement(o.b,{to:"".concat(d.article,"/").concat(l),className:"preview-link"},c.a.createElement("h1",null,s),c.a.createElement("p",null,m),c.a.createElement("span",null,t("article.readMore")),c.a.createElement("ul",{className:"tag-list"},i.map((function(e){return c.a.createElement("li",{key:e,className:"tag-default tag-pill tag-outline"},e)})))))})))},z=t(37),V=t.n(z),Y=function(e){var a=e.page,t=e.currentPage,n=e.url,r=V()({"page-item":!0,active:t===a}),l="page=".concat(a),s=n?"".concat(n,"?").concat(l):function(e){return"".concat(e.pathname,"?").concat(l)};return c.a.createElement("li",{className:r},c.a.createElement(o.b,{to:s,className:"page-link"},a))},G=function(e){var a,t,n=e.total,r=e.limit,l=e.url,o=e.currentPage,s=Math.ceil(n/r),m=(a=1,t=s,Object(w.a)(Array(t-a+1).keys()).map((function(e){return e+a})));return c.a.createElement("ul",{className:"pagination"},m.map((function(e){return c.a.createElement(Y,{key:e,page:e,currentPage:o,url:l})})))},H=function(){var e=Object(E.a)().t,a=N(h.tags),t=Object(g.a)(a,2),r=t[0],l=r.response,s=r.isLoading,m=r.error,i=t[1];return Object(n.useEffect)((function(){i()}),[i]),s||!l?c.a.createElement(J,null):m?c.a.createElement(B,null):c.a.createElement("div",{className:"sidebar"},c.a.createElement("p",null,e("common.popularTags")),c.a.createElement("div",{className:"tag-list"},l.tags.map((function(e){return c.a.createElement(o.b,{key:e,to:"".concat(d.tags,"/").concat(e),className:"tag-default tag-pill"},e)}))))},J=function(e){var a=Object(E.a)().t;return c.a.createElement("div",e,a("common.loading"))},B=function(e){var a=Object(E.a)().t;return c.a.createElement("div",e,a("errors.general"))},R=function(e){var a=e.tagName,t=Object(E.a)().t,r=Object(n.useContext)(L),l=Object(g.a)(r,1)[0];return c.a.createElement("div",{className:"feed-toggle"},c.a.createElement("ul",{className:"nav nav-pills outline-active"},l.isLoggedIn&&c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:d.feed,className:"nav-link"},t("common.yourFeed"))),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:d.main,className:"nav-link",exact:!0},t("common.globalFeed"))),a&&c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(d.tags,"/").concat(a),className:"nav-link"},c.a.createElement("i",{className:"ion-pound"}),"\xa0",a))))},q=function(e){var a=e.children,t=N(h.currentUser),c=Object(g.a)(t,2),r=c[0].response,l=c[1],o=Object(n.useContext)(L),s=Object(g.a)(o,2)[1],m=O("token"),i=Object(g.a)(m,1)[0];return Object(n.useEffect)((function(){i?(s((function(e){return Object(v.a)(Object(v.a)({},e),{},{isLoading:!0})})),l()):s((function(e){return Object(v.a)(Object(v.a)({},e),{},{isLoggedIn:!1})}))}),[s,l,i]),Object(n.useEffect)((function(){r&&s((function(e){return Object(v.a)(Object(v.a)({},e),{},{currentUser:r.user,isLoading:!1,isLoggedIn:!0})}))}),[r,s]),a},K=o.a,Q=function(){return c.a.createElement(x,null,c.a.createElement(q,null,c.a.createElement(K,null,c.a.createElement(M,null),c.a.createElement(U,null))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Q,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.dbb7c263.chunk.js.map