(this["webpackJsonpmedium-react-hooks"]=this["webpackJsonpmedium-react-hooks"]||[]).push([[0],{41:function(e,t,a){e.exports=a(72)},72:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(30),l=a.n(r),o=a(4),s=a(25),i=a(15),m=a(39),u={en:{translation:{common:{email:"Email",signIn:"Sign in",signUp:"Sign up",home:"Home",password:"Password",username:"Username",newPost:"New Post",loading:"Loading...",pageNotFound:"Page Not Found",popularTags:"Popular tags",yourFeed:"Your feed",globalFeed:"Global feed",noArticlesYet:"No articles are here... yet.",readMore:"Read more..."},auth:{needAccount:"Need an account?",haveAccount:"Have an account?"},globalFeed:{title:"Global Feed",bannerTitle:"Medium clone",bannerDescription:"A place to share knowledge."},errors:{general:"Something went wrong"},articleForm:{titlePlaceholder:"Article title",descriptionPlaceholder:"What is this article about?",bodyPlaceholder:"Write your article (in markdown)",tagListPlaceholder:"Enter tags",submitButton:"Publish Article"},article:{edit:"Edit Article",delete:"Delete Article"}}}};s.a.use(m.a).use(i.e).init({fallbackLng:"en",interpolation:{escapeValue:!1},resources:u});s.a;var E=a(2),d=a(75),g=Object.freeze({main:"/",articles:"/articles",login:"/login",register:"/register",newArticle:"/articles/new",profiles:"/profiles",tags:"/tags",feed:"/feed"}),b=a(5),f=a(9),p=a(74),v=function(e){var t=Object(n.useState)(!1),a=Object(E.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(null),o=Object(E.a)(l,2),s=o[0],i=o[1],m=Object(n.useState)(null),u=Object(E.a)(m,2),d=u[0],g=u[1],b=Object(n.useState)({}),v=Object(E.a)(b,2),j=v[0],N=v[1],h=O("token"),y=Object(E.a)(h,1)[0],L=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(e),r(!0)}),[]);return Object(n.useEffect)((function(){if(c){var t=Object(f.a)(Object(f.a)({},j),{},{headers:{authorization:y?"Token ".concat(y):""}});Object(p.a)("https://conduit.productionready.io/api"+e,t).then((function(e){i(e.data)})).catch((function(e){g(e.response.data)})).finally((function(){r(!1)}))}}),[c,j,y,e]),[{isLoading:c,response:s,error:d},L]},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Object(n.useState)((function(){return localStorage.getItem(e)||t})),c=Object(E.a)(a,2),r=c[0],l=c[1];return Object(n.useEffect)((function(){localStorage.setItem(e,r)}),[e,r]),[r,l]},j=Object.freeze({login:"/users/login",register:"/users",currentUser:"/user",articles:"/articles",tags:"/tags",feed:"/articles/feed"}),N=function(e){var t=e.tags;return c.a.createElement("ul",{className:"tag-list"},t.map((function(e){return c.a.createElement("li",{key:e,className:"tag-default tag-pill tag-outline"},e)})))},h={isLoading:!1,isLoggedIn:null,currentUser:null},y=function(e,t){switch(t.type){case"LOADING":return Object(f.a)(Object(f.a)({},e),{},{isLoading:!0});case"SET_AUTHORIZED":return Object(f.a)(Object(f.a)({},e),{},{isLoggedIn:!0,isLoading:!1,currentUser:t.payload});case"SET_UNAUTHORIZED":return Object(f.a)(Object(f.a)({},e),{},{isLoggedIn:!1});default:return e}},L=Object(n.createContext)(),k=function(e){var t=e.children,a=Object(n.useReducer)(y,h);return c.a.createElement(L.Provider,{value:a},t)},w=function(e){var t=e.article,a=t.title,r=t.author,l=t.createdAt,s=t.slug,i=e.deleteArticle,m=Object(d.a)().t,u=Object(n.useContext)(L),b=Object(E.a)(u,1)[0],f=Boolean(b.isLoggedIn)&&r.username===b.currentUser.username;return c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,a),c.a.createElement("div",{className:"article-meta"},c.a.createElement(o.b,{to:"".concat(g.profiles,"/").concat(r.username)},c.a.createElement("img",{src:r.image,alt:""})," "),c.a.createElement("div",{className:"info"},c.a.createElement(o.b,{to:"".concat(g.profiles,"/").concat(r.username)},r.username),c.a.createElement("span",{className:"date"},l)),f&&c.a.createElement("span",null,c.a.createElement(o.b,{className:"btn btn-outline-secondary btn-sm",to:"".concat(g.articles,"/").concat(s,"/edit")},c.a.createElement("i",{className:"ion-edit"}),"\xa0",m("article.edit")),"\xa0",c.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:i},c.a.createElement("i",{className:"ion-trash-a"}),"\xa0",m("article.delete"))))))},S=function(e){var t=e.match.params.slug,a="".concat(j.articles,"/").concat(t),r=v(a),l=Object(E.a)(r,2),o=l[0],s=o.response,i=o.isLoading,m=o.error,u=l[1],d=v(a),f=Object(E.a)(d,2),p=f[0].response,O=f[1],h=Object(n.useState)(!1),y=Object(E.a)(h,2),L=y[0],k=y[1];return Object(n.useEffect)((function(){u()}),[u]),Object(n.useEffect)((function(){null!==p&&k(!0)}),[p]),L?c.a.createElement(b.a,{to:g.main}):c.a.createElement("div",{className:"article-page"},!i&&s&&c.a.createElement(w,{article:s.article,deleteArticle:function(){O({method:"delete"})}}),c.a.createElement("div",{className:"container page"},i&&c.a.createElement(ee,null),m&&c.a.createElement(te,null),!i&&s&&c.a.createElement("div",{className:"row article-content"},c.a.createElement("div",{className:"col-xs-12"},c.a.createElement("div",null,c.a.createElement("p",null,s.article.body)),c.a.createElement(N,{tags:s.article.tagList})))))},x=a(13),A=a(38),P=function(e,t){var a=Object(x.parse)(e).page,n=a?Number(a):1;return{currentPage:n,offset:n*t-t}},F=function(){var e=Object(d.a)().t;return c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,e("globalFeed.bannerTitle")),c.a.createElement("p",null,e("globalFeed.bannerDescription"))))},I=function(e){var t=e.location,a=P(t.search,10),r=a.currentPage,l=a.offset,o=Object(x.stringify)({limit:10,offset:l}),s="".concat(j.articles,"?").concat(o),i=v(s),m=Object(E.a)(i,2),u=m[0],d=u.response,g=u.isLoading,b=u.error,f=m[1],p=Object(n.useContext)(L),O=Object(E.a)(p,1)[0];return Object(n.useEffect)((function(){f()}),[f,r]),c.a.createElement("div",{className:"home-page"},!1===O.isLoggedIn&&c.a.createElement(F,null),c.a.createElement("div",{className:"container page"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-9"},c.a.createElement(ae,null),g&&c.a.createElement(ee,{className:"article-preview"}),b&&c.a.createElement(te,{className:"article-preview"}),!g&&d&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{articles:d.articles}),c.a.createElement(X,{total:d.articlesCount,limit:10,currentPage:r}))),c.a.createElement("div",{className:"col-md-3"},c.a.createElement($,null)))))},C=function(e){var t=e.isLoginView,a=Object(d.a)().t,n=a(t?"common.signIn":"common.signUp"),r=a(t?"auth.needAccount":"auth.haveAccount"),l=t?g.register:g.login;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:"text-xs-center"},n),c.a.createElement("p",{className:"text-xs-center"},c.a.createElement(o.b,{to:l},r)))},U=function(e){var t=Object(d.a)().t,a=e.match.path===g.login,r=t(a?"common.signIn":"common.signUp"),l=a?j.login:j.register,o=Object(n.useState)(""),s=Object(E.a)(o,2),i=s[0],m=s[1],u=Object(n.useState)(""),f=Object(E.a)(u,2),p=f[0],N=f[1],h=Object(n.useState)(""),y=Object(E.a)(h,2),k=y[0],w=y[1],S=function(e){var t=v(e),a=Object(E.a)(t,2),c=a[0],r=c.isLoading,l=c.response,o=c.error,s=a[1],i=O("token"),m=Object(E.a)(i,2),u=m[0],d=m[1],g=Object(n.useContext)(L),b=Object(E.a)(g,2),f=b[0],p=b[1];return Object(n.useEffect)((function(){l&&(d(l.user.token),p({type:"SET_AUTHORIZED",payload:l.user}))}),[p,l,d]),[{isLoading:r,error:o,token:u,currentUserState:f},function(e){p({type:"LOADING"}),s({method:"post",data:{user:e}})}]}(l),x=Object(E.a)(S,2),A=x[0],P=A.isLoading,F=A.error,I=A.currentUserState,U=x[1];return I.isLoggedIn?c.a.createElement(b.a,{to:g.feed}):c.a.createElement("div",{className:"auth-page"},c.a.createElement("div",{className:"container page"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6 offset-md-3 col-xs-12"},c.a.createElement(C,{isLoginView:a}),c.a.createElement("form",{onSubmit:function(e){var t=a?{email:i,password:p}:{username:k,email:i,password:p};e.preventDefault(),U(t)}},F&&c.a.createElement(Y,{backendErrors:F.errors}),c.a.createElement("fieldset",null,!a&&c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:t("common.username"),value:k,onChange:function(e){return w(e.target.value)}})),c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("input",{className:"form-control form-control-lg",type:"email",placeholder:t("common.email"),value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("input",{className:"form-control form-control-lg",type:"password",placeholder:t("common.password"),value:p,onChange:function(e){return N(e.target.value)}})),c.a.createElement("button",{className:"btn btn-lg btn-primary pull-xs-right",type:"submit",disabled:P},r)))))))},T=function(){var e=Object(d.a)().t;return c.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"200px 0"}},c.a.createElement("h2",null,e("common.pageNotFound")))},D=function(e){var t=e.location,a=e.match,r=Object(d.a)().t,l=a.params.slug,o=P(t.search,10),s=o.currentPage,i=o.offset,m=Object(x.stringify)({limit:10,offset:i,tag:l}),u="".concat(j.articles,"?").concat(m),g=v(u),b=Object(E.a)(g,2),f=b[0],p=f.response,O=f.isLoading,N=f.error,h=b[1];return Object(n.useEffect)((function(){h()}),[h,s,l]),c.a.createElement("div",{className:"home-page"},c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,r("globalFeed.bannerTitle")),c.a.createElement("p",null,r("globalFeed.bannerDescription")))),c.a.createElement("div",{className:"container page"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-9"},c.a.createElement(ae,{tagName:l}),O&&c.a.createElement(ee,null),N&&c.a.createElement(te,null),!O&&p&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{articles:p.articles}),c.a.createElement(X,{total:p.articlesCount,limit:10,currentPage:s}))),c.a.createElement("div",{className:"col-md-3"},c.a.createElement($,null)))))},H=function(e){var t=e.location,a=P(t.search,10),r=a.currentPage,l=a.offset,o=Object(x.stringify)({limit:10,offset:l}),s="".concat(j.feed,"?").concat(o),i=v(s),m=Object(E.a)(i,2),u=m[0],d=u.response,g=u.isLoading,b=u.error,f=m[1];return Object(n.useEffect)((function(){f()}),[f,r]),c.a.createElement("div",{className:"home-page"},c.a.createElement("div",{className:"container page"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-9"},c.a.createElement(ae,null),g&&c.a.createElement(ee,null),b&&c.a.createElement(te,null),!g&&d&&c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{articles:d.articles}),c.a.createElement(X,{total:d.articlesCount,limit:10,currentPage:r}))),c.a.createElement("div",{className:"col-md-3"},c.a.createElement($,null)))))},R={title:"",description:"",body:"",tagList:[]},M=function(){var e=j.articles,t=v(e),a=Object(E.a)(t,2),r=a[0],l=r.response,o=r.error,s=a[1],i=Object(n.useState)(!1),m=Object(E.a)(i,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){l&&d(!0)}),[l]),u?c.a.createElement(b.a,{to:"".concat(g.articles,"/").concat(l.article.slug)}):c.a.createElement("div",null,c.a.createElement(ne,{initialValues:R,onSubmit:function(e){s({method:"post",data:{article:e}})},errors:o&&o.errors||{}}))},V=function(e){var t=e.match.params.slug,a="".concat(g.articles,"/").concat(t),r=v(a),l=Object(E.a)(r,2),o=l[0].response,s=l[1],i=v(a),m=Object(E.a)(i,2),u=m[0],d=u.response,f=u.error,p=m[1],O=Object(n.useState)(null),N=Object(E.a)(O,2),h=N[0],y=N[1],L=Object(n.useState)(!1),k=Object(E.a)(L,2),w=k[0],S=k[1];return Object(n.useEffect)((function(){s()}),[s]),Object(n.useEffect)((function(){o&&y({title:o.article.title,description:o.article.description,body:o.article.body,tagList:o.article.tagList})}),[o]),Object(n.useEffect)((function(){d&&S(!0)}),[d]),w?c.a.createElement(b.a,{to:"".concat(j.articles,"/").concat(t)}):c.a.createElement("div",null,c.a.createElement(ne,{onSubmit:function(e){p({method:"put",data:{article:e}})},errors:f&&f.errors||{},initialValues:h}))},G=function(e){var t=e.children,a=v(j.currentUser),c=Object(E.a)(a,2),r=c[0].response,l=c[1],o=Object(n.useContext)(L),s=Object(E.a)(o,2)[1],i=O("token"),m=Object(E.a)(i,1)[0];return Object(n.useEffect)((function(){m?(s({type:"LOADING"}),l()):s({type:"SET_UNAUTHORIZED"})}),[s,l,m]),Object(n.useEffect)((function(){r&&s({type:"SET_AUTHORIZED",payload:r.user})}),[s,r]),t},Z=a(40),_=function(e){var t=e.component,a=Object(Z.a)(e,["component"]),r=Object(n.useContext)(L),l=Object(E.a)(r,1)[0];return c.a.createElement(b.b,Object.assign({},a,{render:function(e){return!1===l.isLoggedIn?c.a.createElement(b.a,{to:g.main}):c.a.createElement(t,e)}}))},B=function(){return c.a.createElement(b.d,null,c.a.createElement(b.b,{path:g.main,component:I,exact:!0}),c.a.createElement(_,{path:g.newArticle,component:M}),c.a.createElement(_,{path:"".concat(g.articles,"/:slug/edit"),component:V}),c.a.createElement(_,{path:g.feed,component:H}),c.a.createElement(b.b,{path:"".concat(g.tags,"/:slug"),component:D}),c.a.createElement(b.b,{path:g.login,component:U}),c.a.createElement(b.b,{path:g.register,component:U}),c.a.createElement(b.b,{path:"".concat(g.articles,"/:slug"),component:S}),!1,c.a.createElement(b.b,{path:"*",component:T}))},z=function(){var e=Object(d.a)().t,t=Object(n.useContext)(L),a=Object(E.a)(t,1)[0],r=a.isLoggedIn,l=a.currentUser;return c.a.createElement("nav",{className:"navbar navbar-light"},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,c.a.createElement(o.b,{to:g.main,className:"navbar-brand"},"Medium")),c.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{exact:!0,to:g.main,className:"nav-link"},e("common.home"))),!1===r&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:g.login,className:"nav-link"},e("common.signIn"))),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:g.register,className:"nav-link"},e("common.signUp")))),r&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:g.newArticle,className:"nav-link"},c.a.createElement("i",{className:"ion-compose"}),"\xa0 ",e("common.newPost"))),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(g.profiles,"/").concat(l.username),className:"nav-link"},c.a.createElement("img",{className:"user-pic",src:l.image,alt:""}),"\xa0 ",l.username))))))},Y=function(e){var t=e.backendErrors,a=Object.entries(t).map((function(e){var t=Object(E.a)(e,2),a=t[0],n=t[1];return"".concat(a," ").concat(n.join(" "))}));return c.a.createElement("ul",{className:"error-messages"},a.map((function(e){return c.a.createElement("li",{key:e},e)})))},J=function(e){var t=e.article,a=t.author,n=t.createdAt,r=t.slug,l=t.title,s=t.description,i=t.tagList,m=Object(d.a)().t;return c.a.createElement("div",{className:"article-preview"},c.a.createElement("div",{className:"article-meta"},c.a.createElement(o.b,{to:"".concat(g.profiles,"/").concat(a.username)},c.a.createElement("img",{src:a.image,alt:""})),c.a.createElement("div",{className:"info"},c.a.createElement(o.b,{to:"".concat(g.profiles,"/").concat(a.username),className:"author"},a.username),c.a.createElement("span",{className:"date"},n))),c.a.createElement(o.b,{to:"".concat(g.articles,"/").concat(r),className:"preview-link"},c.a.createElement("h1",null,l),c.a.createElement("p",null,s),c.a.createElement("span",null,m("common.readMore")),c.a.createElement(N,{tags:i})))},W=function(e){var t=e.articles,a=Object(d.a)().t;return c.a.createElement("div",null,0===t.length&&c.a.createElement("div",{className:"article-preview"},a("common.noArticlesYet")),t.map((function(e,t){return c.a.createElement(J,{article:e,key:t})})))},q=a(37),K=a.n(q),Q=function(e){var t=e.page,a=e.currentPage,n=e.url,r=K()({"page-item":!0,active:a===t}),l="page=".concat(t),s=n?"".concat(n,"?").concat(l):function(e){return"".concat(e.pathname,"?").concat(l)};return c.a.createElement("li",{className:r},c.a.createElement(o.b,{to:s,className:"page-link"},t))},X=function(e){var t,a,n=e.total,r=e.limit,l=e.url,o=e.currentPage,s=Math.ceil(n/r),i=(t=1,a=s,Object(A.a)(Array(a-t+1).keys()).map((function(e){return e+t})));return c.a.createElement("ul",{className:"pagination"},i.map((function(e){return c.a.createElement(Q,{key:e,page:e,currentPage:o,url:l})})))},$=function(){var e=Object(d.a)().t,t=v(j.tags),a=Object(E.a)(t,2),r=a[0],l=r.response,s=r.isLoading,i=r.error,m=a[1];return Object(n.useEffect)((function(){m()}),[m]),c.a.createElement("div",{className:"sidebar"},c.a.createElement("p",null,e("common.popularTags")),s&&c.a.createElement(ee,null),i&&c.a.createElement(te,null),l&&c.a.createElement("div",{className:"tag-list"},l.tags.map((function(e){return c.a.createElement(o.b,{key:e,to:"".concat(g.tags,"/").concat(e),className:"tag-default tag-pill"},e)}))))},ee=function(e){var t=Object(d.a)().t;return c.a.createElement("div",e,t("common.loading"))},te=function(e){var t=Object(d.a)().t;return c.a.createElement("div",e,t("errors.general"))},ae=function(e){var t=e.tagName,a=Object(d.a)().t,r=Object(n.useContext)(L),l=Object(E.a)(r,1)[0];return c.a.createElement("div",{className:"feed-toggle"},c.a.createElement("ul",{className:"nav nav-pills outline-active"},l.isLoggedIn&&c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:g.feed,className:"nav-link"},a("common.yourFeed"))),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:g.main,className:"nav-link",exact:!0},a("common.globalFeed"))),t&&c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(g.tags,"/").concat(t),className:"nav-link"},c.a.createElement("i",{className:"ion-pound"}),"\xa0",t))))},ne=function(e){var t=e.onSubmit,a=e.errors,r=e.initialValues,l=Object(d.a)().t,o=Object(n.useState)(""),s=Object(E.a)(o,2),i=s[0],m=s[1],u=Object(n.useState)(""),g=Object(E.a)(u,2),b=g[0],f=g[1],p=Object(n.useState)(""),v=Object(E.a)(p,2),O=v[0],j=v[1],N=Object(n.useState)(""),h=Object(E.a)(N,2),y=h[0],L=h[1];return Object(n.useEffect)((function(){r&&(m(r.title),j(r.description),f(r.body),L(r.tagList.join(" ")))}),[r]),c.a.createElement("div",{className:"editor-page"},c.a.createElement("div",{className:"container page"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-10 offset-md-1 col-xs-12"},a&&c.a.createElement(Y,{backendErrors:a}),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({title:i,description:O,body:b,tagList:y.split(" ")})}},c.a.createElement("fieldset",null,c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:l("articleForm.titlePlaceholder"),value:i,onChange:function(e){return m(e.target.value)}})),c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:l("articleForm.descriptionPlaceholder"),value:O,onChange:function(e){return j(e.target.value)}})),c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("textarea",{className:"form-control",rows:"8",placeholder:l("articleForm.bodyPlaceholder"),value:b,onChange:function(e){return f(e.target.value)}})),c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("input",{type:"text",className:"form-control form-control-lg",placeholder:l("articleForm.tagListPlaceholder"),value:y,onChange:function(e){return L(e.target.value)}})),c.a.createElement("fieldset",{className:"form-group"},c.a.createElement("button",{type:"submit",className:"btn btn-lg pull-xs-right btn-primary"},l("articleForm.submitButton")))))))))},ce=o.a,re=function(){return c.a.createElement(k,null,c.a.createElement(G,null,c.a.createElement(ce,null,c.a.createElement(z,null),c.a.createElement(B,null))))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(re,null)),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.f28db40f.chunk.js.map